# Reports & Analytics

**Feature ID:** FR-23  
**Priority:** P1 (High)  
**Status:** ğŸ“ Documented  
**Last Updated:** February 16, 2026

---

## Overview

**User Story:** As an admin, I want to view detailed revenue reports and usage analytics to track business performance, optimize pricing strategies, and understand customer behavior.

**Business Value:**

- **Financial Oversight** - Accurate tracking of revenue per branch and package.
- **Strategic Decision Making** - Data-driven decisions on package pricing and promotion.
- **Customer Insights** - Identify top-spending customers and repeat purchase rates.
- **Efficiency** - Automate the calculation of daily/monthly revenue.

---

## Reporting Modules

### 1. Revenue Analytics

Tracks the money flowing through the WiFi system.

- **Gross Revenue:** Daily, Weekly, and Monthly totals.
- **Revenue by Location:** Compare performance across different iCafes.
- **Top Packages:** Understand which packages generate the most income.
- **Payment Method Split:** How much revenue comes from PC Balance vs. E-Wallets.

### 2. Usage & Performance

Tracks how the network is being used.

- **New vs. Returning Users:** Customer retention metrics.
- **Session Volume:** Number of active sessions over time.
- **Peak Usage Hours:** Identify when the network is most stressed.
- **Average Revenue Per User (ARPU):** Spending efficiency per customer.

---

## Data Visualization Points

- **KPI Cards:** Displaying "Today's Revenue", "Active Sessions", and "Total Users".
- **Revenue Trend (Line Chart):** Showing growth over the last 30 days.
- **Package Distribution (Pie Chart):** Showing the percentage of Basic vs. Premium packages sold.
- **Location Comparison (Bar Chart):** Comparing revenue across all branches.

---

## UI/UX Design

### Reports Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Business Analytics                          [Export PDF/CSV] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Date Range: [Last 30 Days ^]   Location: [All Locations ^]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ Today's Revenue ]  [ Active Sessions ]  [ Monthly Growth ]â”‚
â”‚      450k VND             42 Sessions            +12.5%      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Revenue Trend                                               â”‚
â”‚ (Chart Area)                                                â”‚
â”‚ ___________________________________________________________ â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOP PACKAGES          | REVENUE      | COUNT                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš¡ Basic (1 Hr)        | 2,000,000    | 400                  â”‚
â”‚ ğŸš€ Gamer (3 Hr)        | 1,500,000    | 100                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Contracts

### Get Dashboard Stats

`GET /api/admin/analytics/summary`

**Response:**

```json
{
  "success": true,
  "data": {
    "total_revenue": 15450000,
    "active_sessions": 12,
    "total_users": 450,
    "growth_rate": 0.15
  }
}
```

### Monthly Revenue Data (for charts)

`GET /api/admin/analytics/revenue-trend?range=30d`

**Response:**

```json
{
  "success": true,
  "data": [
    { "date": "2026-02-01", "revenue": 450000 },
    { "date": "2026-02-02", "revenue": 520000 }
  ]
}
```

---

## Technical Metrics Calculation

- **Real-time Stats:** Calculated via MongoDB aggregation on `sessions` with `status: ACTIVE`.
- **Historical Reports:** Generated by aggregating `transactions` with `status: SUCCESS` for revenue and `sessions` for usage metrics.
- **Performance:** For large datasets, reports are pre-calculated every night and stored in an `analytics_snapshots` collection to ensure instant dashboard loading.

---

## Export Features

Admins can download reports in:

- **CSV:** For further analysis in Excel or Google Sheets.
- **PDF:** For formal business reviews and offline storage.
- **API:** Developers can consume analytics data via secure tokens.

---

## Related Documents

- [Transaction Management](../payments/transaction-management.md)
- [Location Management](./location-management.md)
- [Package Administration](./package-administration.md)

---

[â† Back to Features](../README.md)
